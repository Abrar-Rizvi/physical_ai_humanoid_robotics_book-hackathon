<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG Chatbot Frontend Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .book-content {
            background-color: #fafafa;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #25c2a0;
        }
        .chat-demo {
            margin-top: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f9f9f9;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            text-align: center;
        }
        .connected {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .disconnected {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .api-call {
            background-color: #e7f3ff;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>RAG Chatbot Frontend Integration Demo</h1>

        <div class="book-content">
            <h3>Sample Book Content (Selectable Text)</h3>
            <p id="book-text">
                Humanoid robotics is an interdisciplinary branch of robotics that focuses on the design, construction, and operation of robots that resemble humans in appearance and behavior. These robots typically have a head, torso, two arms, and two legs, and are designed to interact with human environments and perform tasks in human-like ways. The development of humanoid robots involves expertise from various fields including mechanical engineering, electrical engineering, computer science, and cognitive science.
            </p>
            <p>
                One of the key challenges in humanoid robotics is creating robots that can walk and maintain balance. This requires sophisticated control systems and sensors to maintain stability. Humanoid robots have applications in healthcare, customer service, education, and research.
            </p>
        </div>

        <div class="chat-demo">
            <h3>Backend Communication Demo</h3>
            <div id="status" class="status disconnected">
                Backend Status: Not Connected
            </div>

            <div id="api-calls">
                <h4>API Communication:</h4>
                <div class="api-call">
                    POST http://127.0.0.1:8001/health<br>
                    Status: 200 OK<br>
                    Response: {"status": "healthy", "services": {"qdrant": "connected", "openai": "connected"}}
                </div>

                <div class="api-call">
                    POST http://127.0.0.1:8001/query<br>
                    Request: {"query": "What is humanoid robotics?", "context": "Humanoid robotics is an interdisciplinary branch of robotics..."}<br>
                    Response: {"answer": "An error occurred while processing your query. Please try again later.", "status": "error"}
                </div>
            </div>

            <div id="explanation">
                <h4>Communication Flow:</h4>
                <ol>
                    <li>Frontend sends query to backend via HTTP POST to /query endpoint</li>
                    <li>Backend retrieves relevant context from Qdrant vector database</li>
                    <li>Backend generates response using OpenAI API based on retrieved context</li>
                    <li>Backend returns response with source attribution to frontend</li>
                </ol>

                <h4>Frontend Features:</h4>
                <ul>
                    <li>Fixed-position chat widget (bottom-right, 20px offset)</li>
                    <li>Click-to-open functionality (no auto-expansion)</li>
                    <li>Responsive design (max 400px desktop, full-width-20px mobile)</li>
                    <li>Dark mode compatibility using CSS variables</li>
                    <li>Selected text integration with automatic context capture</li>
                    <li>Session management with local storage</li>
                    <li>Input validation and sanitization</li>
                    <li>Accessibility features (ARIA labels, keyboard navigation)</li>
                </ul>
            </div>
        </div>

        <div class="demo-instructions">
            <h3>How to Test Integration:</h3>
            <p>To fully test the integration:</p>
            <ol>
                <li>Ensure backend server is running on http://127.0.0.1:8001</li>
                <li>Populate Qdrant database with book content embeddings</li>
                <li>Access the Docusaurus site with the integrated ChatInterface component</li>
                <li>Select text in the book content and ask questions about it</li>
                <li>Verify responses are generated based on the book content</li>
            </ol>
        </div>
    </div>

    <script>
        // Simulate checking backend status
        document.addEventListener('DOMContentLoaded', function() {
            // In a real implementation, this would make an actual API call
            setTimeout(function() {
                const statusDiv = document.getElementById('status');
                statusDiv.className = 'status connected';
                statusDiv.innerHTML = 'Backend Status: Connected to http://127.0.0.1:8001';
            }, 1000);
        });
    </script>
</body>
</html>